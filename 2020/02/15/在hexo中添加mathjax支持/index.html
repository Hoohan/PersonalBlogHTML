<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>在hexo中添加mathjax支持 | 种地瓜的小菜园</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="在hexo中添加mathjax支持有两种方式，分别为在markdown文件内添加和更换hexo渲染器。 第一种方式：在文件内添加mathjax支持非常简单，复制以下代码在博客正文前即可。12345678&amp;#123;% raw %&amp;#125;&amp;lt;script type=&amp;quot;text/javascript&amp;quot; src=&amp;quot;https://cdnjs.cloudflare.c">
<meta name="keywords" content="Review&amp;Summary">
<meta property="og:type" content="article">
<meta property="og:title" content="在hexo中添加mathjax支持">
<meta property="og:url" content="http://hoohan.cn/2020/02/15/在hexo中添加mathjax支持/index.html">
<meta property="og:site_name" content="种地瓜的小菜园">
<meta property="og:description" content="在hexo中添加mathjax支持有两种方式，分别为在markdown文件内添加和更换hexo渲染器。 第一种方式：在文件内添加mathjax支持非常简单，复制以下代码在博客正文前即可。12345678&amp;#123;% raw %&amp;#125;&amp;lt;script type=&amp;quot;text/javascript&amp;quot; src=&amp;quot;https://cdnjs.cloudflare.c">
<meta property="og:locale" content="zh-cn">
<meta property="og:updated_time" content="2020-02-16T04:23:06.035Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="在hexo中添加mathjax支持">
<meta name="twitter:description" content="在hexo中添加mathjax支持有两种方式，分别为在markdown文件内添加和更换hexo渲染器。 第一种方式：在文件内添加mathjax支持非常简单，复制以下代码在博客正文前即可。12345678&amp;#123;% raw %&amp;#125;&amp;lt;script type=&amp;quot;text/javascript&amp;quot; src=&amp;quot;https://cdnjs.cloudflare.c">
  
  <link rel="stylesheet" href="/css/index.css">
</head>
<script type="text/javascript" src="http://tajs.qq.com/stats?sId=66513503" charset="UTF-8"></script></html>
<body style="


  background-color: #eff0f6

">
  <div id="container">
    <nav id="nav">
  <header class="header">
    <a href="/" class="title">Hoohan&#39;s Blog</a>
  </header>
  <div class="ctnWrap">
    <div class="icons">
      
        
          
            <a href="https://github.com/Hoohan" target="_blank" class="nav-icn iconfont icon-github"></a>
          
        
      
    </div>
    <div class="menu">
      
        
            <a href="/" class="nav-menu ">HOME</a>
          
        
            <a href="/tags/Review-Summary" class="nav-menu ">REVIEW / SUMMARY</a>
          
        
            <a href="/tags/Linear-Algebra" class="nav-menu ">LINEAR ALGEBRA</a>
          
        
            <a href="/about" class="nav-menu ">ABOUT</a>
          
        
      
    </div>
  </div>
</nav>
    <div id="main"><section class="article">
  <h2 class="title">在hexo中添加mathjax支持</h2>
  <p class="sub">2月 15, 2020</p>
  <article class="content">
    <p>在hexo中添加mathjax支持有两种方式，分别为在markdown文件内添加和更换hexo渲染器。</p>
<h1 id="第一种方式：在文件内添加mathjax支持"><a href="#第一种方式：在文件内添加mathjax支持" class="headerlink" title="第一种方式：在文件内添加mathjax支持"></a>第一种方式：在文件内添加mathjax支持</h1><p>非常简单，复制以下代码在博客正文前即可。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;% raw %&#125;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=&quot;text/x-mathjax-config&quot;&gt;</span><br><span class="line">  MathJax.Hub.Config(</span><br><span class="line">      &#123;tex2jax: &#123;inlineMath: [[&apos;$&apos;,&apos;$&apos;], [&apos;\\(&apos;,&apos;\\)&apos;]]&#125;&#125;</span><br><span class="line">    );</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&#123;% endraw %&#125;</span><br></pre></td></tr></table></figure></p>
<p>需要注意的是，在clover主题中，以此方法添加的公式有两个问题：  </p>
<ul>
<li>渲染后每个公式下方会多一个空行，暂未找到解决方法。  </li>
<li>公式内使用<code>\\</code>不可以换行，需要使用<code>\\\\</code>。  </li>
</ul>
<p>如果您有解决方法，欢迎一起<a href="https://hoohan.cn/about/">探讨交流</a>！  </p>
<h1 id="第二种方式：更改hexo渲染器"><a href="#第二种方式：更改hexo渲染器" class="headerlink" title="第二种方式：更改hexo渲染器"></a>第二种方式：更改hexo渲染器</h1><p>我们可以直接更改Hexo的渲染系统来达到使博客<strong>原生支持</strong>mathjax的效果。<br>共分五步。<br><strong>① 将Marked替换为Kramed</strong><br>在终端重定向到博客目录，使用如下命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-renderer-marked --save</span><br><span class="line">npm install hexo-renderer-kramed --save</span><br></pre></td></tr></table></figure></p>
<p>此后，修改Kramed渲染文件。<br>打开博客根目录/node_modules/hexo-renderer-kramed/lib/renderer.js<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// Change inline math rule</span><br><span class="line">function formatText(text) &#123;</span><br><span class="line">  // Fit kramed&apos;s rule: $$ + \1 + $$</span><br><span class="line">  return text.replace(/`\$(.*?)\$`/g, &apos;$$$$$1$$$$&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//将上方代码更改为下方代码</span><br><span class="line"></span><br><span class="line">// Change inline math rule</span><br><span class="line">function formatText(text) &#123;</span><br><span class="line">  // Fit kramed&apos;s rule: $$ + \1 + $$</span><br><span class="line">    return text;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p><strong>② 将hexo-math替换为hexo-renderer-mathjax</strong><br>在刚才的终端中，使用如下命令，先卸载，后安装。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-math --save</span><br><span class="line">npm install hexo-renderer-mathjax --save</span><br></pre></td></tr></table></figure></p>
<p><strong>③ 更新mathjax CDN</strong><br>打开博客根目录/node_modules/hexo-renderer-mathjax/mathjax.html<br>将最下方的mathjax的js链接替换为下方的链接，注意不要删掉html标签。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML</span><br></pre></td></tr></table></figure></p>
<p><strong>④ 修改默认转义规则</strong><br>打开博客根目录/node_modules/kramed/lib/rules/inline.js<br>找到下面两行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">escape: /^\\([\\`*&#123;&#125;\[\]()#$+\-.!_&gt;])/,</span><br><span class="line">//在第11行上下</span><br><span class="line">em: /^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/, </span><br><span class="line">//在第21行上下</span><br></pre></td></tr></table></figure></p>
<p>分别修改为<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">escape: /^\\([`*\[\]()#$+\-.!_&gt;])/,</span><br><span class="line">em: /^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,</span><br></pre></td></tr></table></figure></p>
<p><strong>⑤ 在主题中开启mathjax</strong><br>在主题的配置文件(一般为_config.yml)中加入如下声明:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># MathJax Support</span><br><span class="line">mathjax:</span><br><span class="line">  enable: true</span><br><span class="line">  per_page: true</span><br></pre></td></tr></table></figure></p>
<p>（可选）在此后还可以在博客markdown文件开头加入mathjax开关，双保险，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 在hexo中添加mathjax支持</span><br><span class="line">date: 2020-02-15 14:52:33</span><br><span class="line">tags: mathjax</span><br><span class="line">mathjax: ture</span><br><span class="line">---</span><br></pre></td></tr></table></figure></p>
<h1 id="About"><a href="#About" class="headerlink" title="About"></a>About</h1><p>本文参考了互联网上的两个教程，遵循开源协议精神，将其列在下方：</p>
<ul>
<li><a href="https://www.jianshu.com/u/e8537ffe74d6" target="_blank" rel="noopener">@huojun</a>撰写的<a href="https://www.jianshu.com/p/96a65a0bdb95" target="_blank" rel="noopener">在hexo博客markdown文件中添加mathjax支持</a>  </li>
<li><a href="https://blog.csdn.net/littlehaes" target="_blank" rel="noopener">@littlehaes</a>撰写的<a href="https://blog.csdn.net/littlehaes/article/details/84370393" target="_blank" rel="noopener">在hexo中使用mathjax的方法</a>  </li>
</ul>
<p>本人在此对两位作者表示衷心的感谢！</p>

  </article>
  <footer class="f-cf">
    
    
      <a href="/2020/02/12/矩阵乘法与逆矩阵/" class="link f-fr">线性代数3：矩阵乘法与逆矩阵⟶</a>
    
  </footer>
</section></div>
    <footer id="footer" class="f-cf">
  <a href="mailto:work@hoohan.cn">work@hoohan.cn</a>
  
    
      
        · <a href="https://github.com/Hoohan" target="_blank" class="nav-icn">GitHub</a>
      
    
  
  · <a href="http://beian.miit.gov.cn/" target="_blank" class="nav-icn">冀ICP备19000089号</a>
  · <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=13043302000128" target="_blank" class="nav-icn">冀公网安备13043302000128号</a>
  <span class="copyright">All rights reserved @Hoohan</span>
</footer>
  </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<!--<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
</body>
</html>